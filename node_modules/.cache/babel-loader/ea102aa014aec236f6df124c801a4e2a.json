{"ast":null,"code":"var _jsxFileName = \"/home/bmatheusc/Documentos/GitHub/tutorials/mememaker/src/pages/Home/index.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport { Wrapper, Card, Templates, Form, Button, Meme } from './styles';\nimport qs from 'qs';\nimport logo from \"../../assets/logo.svg\";\nimport api from '../../services/api';\n\nconst Home = () => {\n  const [templates, setTemplates] = useState([]);\n  const [selectedTemplate, setSelectedTemplate] = useState();\n  const [boxes, setBoxes] = useState([]);\n  const [generatedMeme, setGeneratedMeme] = useState('');\n  useEffect(() => {\n    (async () => {\n      const response = await api.get('/get_memes');\n      const {\n        data: {\n          memes\n        }\n      } = response.data;\n      setTemplates(memes);\n    })();\n  }, []);\n\n  const handleInputChange = index => e => {\n    const newValues = boxes;\n    newValues[index] = e.target.value;\n    setBoxes(newValues);\n  };\n\n  function handleSelectTemplate(template) {\n    setSelectedTemplate(template);\n    setBoxes([]);\n  }\n\n  function handleReset() {\n    setSelectedTemplate(undefined);\n    setBoxes([]);\n    setGeneratedMeme('');\n  }\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    const params = qs.stringify({\n      template_id: selectedTemplate === null || selectedTemplate === void 0 ? void 0 : selectedTemplate.id,\n      username: 'vikayel543',\n      password: 'vikayel543',\n      boxes: boxes.map(text => ({\n        text\n      }))\n    });\n    const response = await api.get(`/caption_image?${params}`);\n    const {\n      data: {\n        url\n      }\n    } = response.data;\n    console.log(response);\n    setGeneratedMeme(url);\n  }\n\n  function handleDownload() {\n    const blob = new Blob(['https://i.imgflip.com/44s9xk.jpg'], {\n      type: 'text/img'\n    });\n    const url = window.URL.createObjectURL(blob);\n    let a = document.createElement('a');\n    a.href = url;\n    a.download = 'meme.jpg';\n    document.body.appendChild(a);\n    a.click();\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Wrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logo,\n    alt: \"MemeMaker\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"https://i.imgflip.com/44s9xk.jpg\",\n    download: 'name.jpg',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }, \"Download Meme\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: handleDownload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }, \"Download meme\"), generatedMeme ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Meme, {\n    src: generatedMeme,\n    alt: \"Generated Meme\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: handleReset,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 29\n    }\n  }, \"Criar outro meme\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: handleDownload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 29\n    }\n  }, \"Download meme\")) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 29\n    }\n  }, \"Selecione um template\"), /*#__PURE__*/React.createElement(Templates, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 29\n    }\n  }, templates.map(template => /*#__PURE__*/React.createElement(\"button\", {\n    key: template.id,\n    onClick: () => handleSelectTemplate(template),\n    className: template.id == (selectedTemplate === null || selectedTemplate === void 0 ? void 0 : selectedTemplate.id) ? 'selected' : '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: template.url,\n    alt: template.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 41\n    }\n  })))), selectedTemplate && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 37\n    }\n  }, \"Textos\"), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 37\n    }\n  }, new Array(selectedTemplate.box_count).fill('').map((_, index) => /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    key: index,\n    placeholder: `Text #${index + 1}`,\n    onChange: handleInputChange(index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 45\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 41\n    }\n  }, \"MakeMyMeme\")))))));\n};\n\nexport default Home;","map":{"version":3,"sources":["/home/bmatheusc/Documentos/GitHub/tutorials/mememaker/src/pages/Home/index.tsx"],"names":["React","useState","useEffect","Wrapper","Card","Templates","Form","Button","Meme","qs","api","Home","templates","setTemplates","selectedTemplate","setSelectedTemplate","boxes","setBoxes","generatedMeme","setGeneratedMeme","response","get","data","memes","handleInputChange","index","e","newValues","target","value","handleSelectTemplate","template","handleReset","undefined","handleSubmit","preventDefault","params","stringify","template_id","id","username","password","map","text","url","console","log","handleDownload","blob","Blob","type","window","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","click","logo","name","Array","box_count","fill","_"],"mappings":"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","sourcesContent":["import React, { FC, useState, useEffect, ChangeEvent, FormEvent } from 'react';\nimport { Wrapper, Card, Templates, Form, Button, Meme } from './styles';\n\nimport qs from 'qs';\n\nimport logo from '../../assets/logo.svg';\nimport api from '../../services/api';\n\ninterface ITemplate {\n    id: number;\n    name: string;\n    url: string;\n    box_count: number;\n}\n\nconst Home: FC = () => {\n    const [templates, setTemplates] = useState<ITemplate[]>([]);\n    const [selectedTemplate, setSelectedTemplate] = useState<ITemplate>();\n    const [boxes, setBoxes] = useState<string[]>([]);\n    const [generatedMeme, setGeneratedMeme] = useState<string>('');\n\n    useEffect(() => {\n        (async () => {\n            const response = await api.get('/get_memes');           \n            const { data: { memes } } = response.data;\n\n            setTemplates(memes);\n        })();\n    }, []);\n\n    const handleInputChange = (index: number) => (e: ChangeEvent<HTMLInputElement>) => {\n        const newValues = boxes;\n        newValues[index] = e.target.value;\n        setBoxes(newValues);\n    }\n\n    function handleSelectTemplate(template: ITemplate) {\n        setSelectedTemplate(template);\n        setBoxes([]);\n    }\n\n    function handleReset() {\n        setSelectedTemplate(undefined);\n        setBoxes([]);\n        setGeneratedMeme('');\n    }\n\n    async function handleSubmit(e: FormEvent) {\n        e.preventDefault();\n\n        const params = qs.stringify({\n            template_id: selectedTemplate?.id,\n            username: 'vikayel543',\n            password: 'vikayel543',\n            boxes: boxes.map(text => ({ text })),\n        });\n\n        const response = await api.get(`/caption_image?${params}`);\n        const { data: { url }} = response.data;\n\n        console.log(response);\n\n        setGeneratedMeme(url);\n    }\n\n    function handleDownload() {\n        const blob = new Blob(['https://i.imgflip.com/44s9xk.jpg'], { type: 'text/img'});\n        const url = window.URL.createObjectURL(blob);\n\n        let a = document.createElement('a');\n\n        a.href = url;\n        a.download = 'meme.jpg';\n        document.body.appendChild(a);\n        a.click();\n    }\n\n    return (\n        <>\n            <Wrapper>\n                <img src={ logo } alt=\"MemeMaker\"/>\n\n                <Card>\n                    <a href=\"https://i.imgflip.com/44s9xk.jpg\" download={ 'name.jpg' }>\n                        Download Meme\n                    </a>\n                    <Button onClick={ handleDownload }>Download meme</Button>\n                    { generatedMeme ? (\n                        <>\n                            <Meme src={ generatedMeme } alt=\"Generated Meme\"/>\n                            <Button onClick={ handleReset }>Criar outro meme</Button>\n                            <Button onClick={ handleDownload }>Download meme</Button>\n                        </>\n                    )\n                    : (\n                        <>\n                            <h2>Selecione um template</h2>\n        \n                            <Templates>\n                                { templates.map((template) => (\n                                    <button key={ template.id } onClick={ () => handleSelectTemplate(template) } className={ template.id == selectedTemplate?.id ? 'selected' : '' }>\n                                        <img src={ template.url } alt={ template.name } />\n                                    </button>\n                                ))}\n                            </Templates>\n        \n                            { selectedTemplate && (\n                                <>\n                                    <h2>Textos</h2>\n        \n                                    <Form onSubmit={ handleSubmit }>\n                                        { (new Array(selectedTemplate.box_count).fill('').map((_, index) => (\n                                            <input type=\"text\" key={index} placeholder={ `Text #${index + 1}`} onChange={ handleInputChange(index) } />\n                                        )))}\n        \n                                        <Button type=\"submit\">MakeMyMeme</Button>\n                                    </Form>\n                                </>\n                            )}\n                        </>\n                    )}\n\n                </Card>\n            </Wrapper>\n        </>\n    );\n};\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}